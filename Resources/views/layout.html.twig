{# Resources/views/layout.html.twig #}
{% extends "@Bootstrap/layout.html.twig" %}
{% block bootstrapHeadStyles %}
    {{ parent() }}
    <!-- Google fonts -->
    <link type="text/css" rel="stylesheet" href="{{ asset("bundles/adminbsb/fonts/roboto_400-700.css") }}">
    <link type="text/css" rel="stylesheet" href="{{ asset("bundles/adminbsb/fonts/material_icons.css") }}">
    <!-- Animation plugin -->
    <link type="text/css" rel="stylesheet" href="{{ asset('bundles/adminbsb/plugins/animate-css/animate.min.css') }}">
    <!-- jQuery DataTables plugin -->
    {% include "@JQueryDataTables/styles.html.twig" with {"theme": "bootstrap" } %}
    <link type="text/css" rel="stylesheet" href="{{ asset("bundles/adminbsb/plugins/jquery-datatable/skin/bootstrap/css/dataTables.bootstrap.min.css") }}">
    <!-- Waves Effect plugin -->
    <link type="text/css" rel="stylesheet" href="{{ asset('bundles/adminbsb/plugins/node-waves/waves.min.css') }}">
    <!-- AdminBSB Material Design -->
    <link type="text/css" rel="stylesheet" href="{{ asset("bundles/adminbsb/css/style.min.css") }}">
    <link type="text/css" rel="stylesheet" href="{{ asset("bundles/adminbsb/css/themes/all-themes.min.css") }}">
    {% block adminBSBHeadStyles %}
    {% endblock %}
{% endblock %}
{% block bootstrapHeadTitle %}{{ parent() }}{{ block("adminBSBHeadTitle") }}{% endblock %}
{% block bootstrapBodyClasses %}{{ parent() }} class="{{ block("adminBSBBodyClasses") }}"{% endblock %}
{% block bootstrapBodyContent %}
    {{ parent() }}
    {% block adminBSBBodyContent %}
    {% endblock %}
{% endblock %}
{% block bootstrapBodyScripts %}
    {{ parent() }}
    {% include "@JQueryDataTables/scripts.html.twig" with {"theme": "bootstrap" } %}
    <!-- jQuery Slimscroll plugin -->
    <script type="text/javascript" src="{{ asset('bundles/adminbsb/plugins/jquery-slimscroll/jquery.slimscroll.js') }}"></script>
    <!-- jQuery Spinner plugin -->
    <script type="text/javascript" src="{{ asset('bundles/adminbsb/plugins/jquery-spinner/js/jquery.spinner.min.js') }}"></script>
    <!-- Waves Effect plugin -->
    <script type="text/javascript" src="{{ asset('bundles/adminbsb/plugins/node-waves/waves.min.js') }}"></script>
    <!-- AdminBSB Material Design -->
    <script type="text/javascript" src="{{ asset("bundles/adminbsb/js/admin.js") }}"></script>
    <!-- Custom -->
    <script type="text/javascript">

        // Skin changer
        function skinChanger() {
            $('.right-sidebar .demo-choose-skin li').on('click', function () {
                var $body = $('body');
                var $this = $(this);

                var existTheme = $('.right-sidebar .demo-choose-skin li.active').data('theme');
                $('.right-sidebar .demo-choose-skin li').removeClass('active');
                $body.removeClass('theme-' + existTheme);
                $this.addClass('active');

                $body.addClass('theme-' + $this.data('theme'));
            });
        }

        // Skin tab content set height and show scroll
        function setSkinListHeightAndScroll(isFirstTime) {
            var height = $(window).height() - ($('.navbar').innerHeight() + $('.right-sidebar .nav-tabs').outerHeight());
            var $el = $('.demo-choose-skin');

            if (!isFirstTime) {
                $el.slimScroll({destroy: true}).height('auto');
                $el.parent().find('.slimScrollBar, .slimScrollRail').remove();
            }

            $el.slimscroll({
                height: height + 'px',
                color: 'rgba(0,0,0,0.5)',
                size: '6px',
                alwaysVisible: false,
                borderRadius: '0',
                railBorderRadius: '0'
            });
        }

        // Setting tab content set height and show scroll
        function setSettingListHeightAndScroll(isFirstTime) {
            var height = $(window).height() - ($('.navbar').innerHeight() + $('.right-sidebar .nav-tabs').outerHeight());
            var $el = $('.right-sidebar .demo-settings');

            if (!isFirstTime) {
                $el.slimScroll({destroy: true}).height('auto');
                $el.parent().find('.slimScrollBar, .slimScrollRail').remove();
            }

            $el.slimscroll({
                height: height + 'px',
                color: 'rgba(0,0,0,0.5)',
                size: '6px',
                alwaysVisible: false,
                borderRadius: '0',
                railBorderRadius: '0'
            });
        }

        // Activate notification and task dropdown on top right menu
        function activateNotificationAndTasksScroll() {
            $('.navbar-right .dropdown-menu .body .menu').slimscroll({
                height: '254px',
                color: 'rgba(0,0,0,0.5)',
                size: '4px',
                alwaysVisible: false,
                borderRadius: '0',
                railBorderRadius: '0'
            });
        }

        $(function () {
            skinChanger();
            activateNotificationAndTasksScroll();

            setSkinListHeightAndScroll(true);
            setSettingListHeightAndScroll(true);
            $(window).resize(function () {
                setSkinListHeightAndScroll(false);
                setSettingListHeightAndScroll(false);
            });
        });

    </script>
    {% block adminBSBBodyScripts %}
    {% endblock %}
{% endblock %}
